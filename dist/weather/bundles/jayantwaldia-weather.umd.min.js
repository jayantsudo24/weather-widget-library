!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("@jayantwaldia/weather",["exports","@angular/core","@angular/common/http","rxjs","rxjs/operators","@angular/common"],e):e(((t=t||self).jayantwaldia=t.jayantwaldia||{},t.jayantwaldia.weather={}),t.ng.core,t.ng.common.http,t.rxjs,t.rxjs.operators,t.ng.common)}(this,function(t,e,r,o,i,n){"use strict";var a=function(){function t(t){this._http=t,this.apiURL="https://api.openweathermap.org/data/2.5/weather?q=",this.timeApiURL="http://api.geonames.org/timezoneJSON?formatted=true&",this.userdetails="&username=kalyan11021980&style=full",this.appID="&appid=dc9b03f27b6d1b3ef9e1e36680b989ed"}return t.prototype.getWeather=function(t,e){return this._http.get(this.apiURL+t+this.appID+"&units="+e).pipe(i.catchError(this.handlError))},t.prototype.getLocalTime=function(t,e){return this._http.get(this.timeApiURL+"lat="+t+"&lng="+e+this.userdetails)},t.prototype.handlError=function(t){return o.throwError(t.error.message)},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:r.HttpClient}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(r.HttpClient))},token:t,providedIn:"root"}),t}(),s=function(){function t(t){this._ws=t,this.errText=""}return t.prototype.renderWeather=function(){var t=this;this.weathersubscription=this._ws.getWeather(this.location,this.unit).subscribe(function(e){t.errText="",t.temp=Math.round(e.main.temp),t.desc=e.weather[0].description,t.weatherico="http://openweathermap.org/img/w/"+e.weather[0].icon+".png",t.city=e.name,t.country=e.sys.country,t.getLocalTime(e.coord.lat,e.coord.lon)},function(e){t.errText=e})},t.prototype.getLocalTime=function(t,e){var r=this;this._ws.getLocalTime(t,e).subscribe(function(t){r.dt=t.time})},t.prototype.ngOnChanges=function(t){(t.location||t.unit)&&(this.weathersubscription&&this.weathersubscription.unsubscribe(),this.renderWeather())},t.decorators=[{type:e.Component,args:[{selector:"app-weather",template:'\r\n<article class="widget">\r\n    <div *ngIf="errText" class="error">{{errText}}</div>\r\n  <div class="weatherIcon"><img width="100" height="100" src=\'{{weatherico}}\'/></div>\r\n  <div class="weatherInfo">\r\n    <div class="temperature"><span>{{temp}}&deg;</span></div>\r\n    <div class="description">    \r\n      <div class="weatherCondition">{{desc}}</div>    \r\n      <div class="place">{{city}}, {{country}}</div>\r\n    </div>\r\n  </div>\r\n  <div class="date">{{dt | date:\'MMM d\'}}</div>\r\n</article>\r\n',encapsulation:e.ViewEncapsulation.ShadowDom,styles:[".error{padding:10px;background:#fff;width:100%;margin-bottom:10px;color:red;font-weight:700;font-size:14px;font-family:arial}.widget{position:absolute;font-family:Poiret One;top:50%;left:50%;display:flex;height:300px;width:600px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);flex-wrap:wrap;cursor:pointer;border-radius:20px;box-shadow:0 27px 55px 0 rgba(0,0,0,.3),0 17px 17px 0 rgba(0,0,0,.15)}.widget .weatherIcon{flex:1 100%;height:60%;border-top-left-radius:20px;border-top-right-radius:20px;background:#fce044;font-family:weathericons;display:flex;align-items:center;justify-content:space-around;font-size:100px}.widget .weatherIcon i{padding-top:30px}.widget .weatherInfo{flex:0 0 70%;height:40%;background:#080705;border-bottom-left-radius:20px;display:flex;align-items:center;color:#fff}.widget .weatherInfo .temperature{flex:0 0 40%;width:100%;font-size:65px;display:flex;justify-content:space-around}.widget .weatherInfo .description{flex:0 60%;display:flex;flex-direction:column;width:100%;height:100%;justify-content:center}.widget .weatherInfo .description .weatherCondition{text-transform:uppercase;font-size:35px;font-weight:100}.widget .weatherInfo .description .place{font-size:15px}.widget .date{flex:0 0 30%;height:40%;background:#70c1b3;border-bottom-right-radius:20px;display:flex;justify-content:space-around;align-items:center;color:#fff;font-size:30px;font-weight:800}p{position:fixed;bottom:0;right:2%}p a{text-decoration:none;color:#e4d6a7;font-size:10px}"]}]}],t.ctorParameters=function(){return[{type:a}]},t.propDecorators={location:[{type:e.Input,args:["location"]}],unit:[{type:e.Input,args:["unit"]}]},t}(),p=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[s],imports:[r.HttpClientModule,n.CommonModule],exports:[s]}]}],t}();t.WeatherComponent=s,t.WeatherModule=p,t.WeatherService=a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=jayantwaldia-weather.umd.min.js.map